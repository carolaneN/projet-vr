<html>
<head>
  <meta charset="utf-8" />
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <script src="./dist/aframe-extras.js"></script>
  <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.4/dist/aframe-extras.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/kylebakerio/ada-water/ada-water.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>

  <title>Projet 3D</title>
</head>
<body>
  <a-scene generate-houses generate-clouds fog="type: linear; density: 0.005; color: #ffffff; near: 100; far: 550">
    <a-assets>
      <img id="sky" src="./assets/sky.png" alt="" />
      <img id="ground" src="./assets/earthcloudmap.jpg" alt="">
      <img id="bakery" src="./assets/osono_bakery.jpg" alt="">
      <img id="ville" src="./assets/aerial-view.jpg" alt="">

      <a-asset-item id="aeronef" src="./assets/airship_spirit_of_adventure.glb"></a-asset-item>
      <a-asset-item id="broom" src="./assets/broom.glb"></a-asset-item>
      <a-asset-item id="jiji" src="./assets/jiji.glb"></a-asset-item>
      <a-asset-item id="cloud" src="./assets/cloud_high_poly.glb"></a-asset-item>
      <a-asset-item id="tower" src="./assets/newmarket_suffolk_uk_-_jubilee_clock_tower.glb"></a-asset-item>
      <a-asset-item id="seagull" src="./assets/seagull.glb"></a-asset-item>
      <a-asset-item id="house1" src="./assets/house_1.glb"></a-asset-item>
      <a-asset-item id="house2" src="./assets/house_2.glb"></a-asset-item>
    </a-assets>

    <!-- <a-camera position="0 0 0"></a-camera> -->
    

    <a-entity  id="rig" movement-controls position="0  1 -4">

      

      <a-camera look-controls position="0 1 5">
        <a-cursor></a-cursor>
        <a-sound src="./assets/seagull.mp3" autoplay="true" volume=".8" loop="true"></a-sound>
      <a-sound src="./assets/ost_town_with_ocean_view.mp3" autoplay="true" loop="true"></a-sound>
      <a-sound src="./assets/airship.mp3" autoplay="false"></a-sound>

        <a-entity position="0 -1.5 0">
          <a-entity gltf-model="#jiji" scale=".1 .1 .1" position="0 .4 -1.5"></a-entity>
          <a-entity gltf-model="#broom" scale="4 4 4" rotation="-80 0 0"></a-entity>
        </a-entity>

        <a-entity position="0 0 -5">
          <a-entity gltf-model="#seagull" animation-mixer loop="repeat" duration="1000" scale="1 1 1" position="-3 -1 0" rotation="0 -90 0"></a-entity>
  
        <a-entity gltf-model="#seagull" animation-mixer loop="repeat" duration="1000" scale="1 1 1" position="-5 -1 2" rotation="0 -90 0"></a-entity>
  
        <a-entity gltf-model="#seagull" animation-mixer loop="repeat" duration="1000" scale="1 1 1" position="-7 -1 4" rotation="0 -90 0"></a-entity>
  
        <a-entity gltf-model="#seagull" animation-mixer loop="repeat" duration="1000" scale="1 1 1" position="3 -1 0" rotation="0 -90 0"></a-entity>
        
        <a-entity gltf-model="#seagull" animation-mixer loop="rapeat" duration="1000" scale="1 1 1" position="5 -1 2" rotation="0 -90 0"></a-entity>
  
        <a-entity gltf-model="#seagull" animation-mixer loop="repeat" duration="1000" scale="1 1 1" position="7 -1 4" rotation="0 -90 0"></a-entity>
        </a-entity>
      </a-camera>
      
      <a-entity gltf-model="#aeronef" scale="10 10 10" position="-200 85 -115" rotation="0 90 0"
      animation="property:position; to: 340 -10 -140; dur: 25000; easing: linear;"
      ></a-entity>

      <a-entity gltf-model="#cloud" scale="40 40 40" position="-400 80 -120" rotation="0 0 0"></a-entity>

      <!-- <a-entity position="0 0 0">
        <a-entity gltf-model="#seagull" scale=".8 .8 .8" position="-3 0 0" rotation="0 -90 0"></a-entity>

      <a-entity gltf-model="#seagull" scale=".8 .8 .8" position="-5 0 2" rotation="0 -90 0"></a-entity>

      <a-entity gltf-model="#seagull" scale=".8 .8 .8" position="-7 0 4" rotation="0 -90 0"></a-entity>

      <a-entity gltf-model="#seagull" scale=".8 .8 .8" position="3 0 0" rotation="0 -90 0"></a-entity>
      
      <a-entity gltf-model="#seagull" scale=".8 .8 .8" position="5 0 2" rotation="0 -90 0"></a-entity>

      <a-entity gltf-model="#seagull" scale=".8 .8 .8" position="7 0 4" rotation="0 -90 0"></a-entity>
      </a-entity> -->

      <a-entity gltf-model="#cloud" scale="40 40 40" position="35 15 -120" rotation="0 0 0"></a-entity>

      

      <a-entity gltf-model="#tower" scale="6.5 6.5 6.5" position="60 10 -120"></a-entity>

      <!-- <a-entity gltf-model="#fog" scale="1 1 1" posiion="0 0 0" rotation="0 0 0"></a-entity> -->

      <a-entity geometry="primitive:plane; width:232; height:174" position="0 -40 -30" rotation="-90 90 0" material="src: #ville">
      </a-entity>

      <a-water width="1000" length="1000" position="0 -41 -30" base-color="lightblue"></a-water>

      <a-sky src="#sky"></a-sky>
    </a-entity>
  </a-scene>

  <script>
//   AFRAME.registerComponent("generate-clouds", {
//   init: function () {
//     const models = ["#cloud"];

//     for (let i = 0; i < 50; i++) {
//       const cloud = document.createElement("a-entity");
//       const randomModel = models[Math.floor(Math.random() * models.length)];

//       cloud.setAttribute("position", {
//         x: Math.random() * 100 - 50,
//         y: Math.random() * 40 - 10,
//         z: Math.random() * 80 - 50
//       });

//       cloud.setAttribute("rotation", `0 ${Math.random() * 360} 0`);
//       cloud.setAttribute("scale", "1 1 1")


//       cloud.setAttribute("gltf-model", randomModel);
//       this.el.appendChild(cloud);
//     }
//   }
// });

AFRAME.registerComponent("generate-houses", {
  init: function () {
    const models = ["#house1", "#house2"];
    const planeWidth = 174;
    const planeHeight = 232;
    const numHouses = 40; 

    for (let i = 0; i < numHouses; i++) {
      const house = document.createElement("a-entity");
      const randomModel = models[Math.floor(Math.random() * models.length)];

      x = Math.random() * (planeWidth - 10) - (planeWidth / 2 - 5);
        z = Math.random() * (planeHeight / 2) - (planeHeight / 2);
      
      house.setAttribute("position", {
        x: x,
        y: -40,
        z: z
      });

      house.setAttribute("rotation", `0 ${Math.random() * 360} 0`);
      house.setAttribute("scale", "3 3 3");
      house.setAttribute("gltf-model", randomModel);

      this.el.appendChild(house);
    }
  }
});

  </script>
</body>
</html>